{% extends 'base.html.twig' %}
{% block stylesheets %}
	{{ parent() }}
{% endblock %}
{% block title %}Commandes
{% endblock %}

{% block body %}
	<div class="container">
			<h1 class="mb-lg-5 mb-4 text-center">Mes commandes
			</h1>
		{% for order in orders %}
			<div class="accordion" id="accordion">
				<div class="accordion-item">
					<h2 class="accordion-header" id="heading_{{ order.id }}">
						<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_{{ order.id }}" aria-expanded="true" aria-controls="collapse_{{ order.id }}">
							<p class="h2 mx-auto">Commande du
							{{ order.createdAt|format_datetime('full', 'short') }}</p>
						</button>
					</h2>
					<div id="collapse_{{ order.id }}" class="accordion-collapse collapse" aria-labelledby="heading_{{ order.id }}" data-bs-parent="#accordion">
						<div class="accordion-body text-center">
							<div class="d-flex flex-wrap">
								<div class="mx-auto mt-2">
									<h3 class="text-center">Facturation</h3>
									<p>{{ order.client.lastname }}
										{{ order.client.firstname }}</p>
									<p>{{ order.client.address|title }},
										{{ order.client.postalCode }}
										{{ order.client.city }}</p>
									<p>{{ order.client.phone }}</p>
									<p>{{ order.client.email }}</p>
								</div>
							<div class="mx-auto mt-2">
									<h3 class="text-center">Articles</h3>
									<table class="table">
										<thead>
											<th>Articles</th>
											<th>Prix</th>
										</thead>
										{% for product in order.product %}
											<tbody>
												<td>{{ product.name }}</td>
												<td>{{ product.price|format_currency('EUR', {}) }}</td>
											{% endfor %}
										</tbody>
										<tfoot>
										<th></th>
										<th>Total : {{ order.price|format_currency('EUR', {}) }} </th>
										</tfoot>
									</table>
								</div>
						</div>
					</div>
				</div>
			{% else %}
				Aucune commande trouv√©
			{% endfor %}
		</div>
	{% endblock %}
